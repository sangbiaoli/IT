
## Docker常用命令
1. docker服务器
    * start/stop/restart
    ```bash
    # docker服务启动/停止/重启
    $service docker start/stop/restart
    ```

2. docker容器生命周期管理
    * run
    * start/stop/restart
    * kill
    * rm
    * pause/unpause
    * create
    * exec
    ```bash
    #新建并启动容器;-d, 后台运行;-p 端口映射，格式为：主机(宿主)端口:容器端口
    $docker run -d -p 91:80 nginx # http://192.168.18.130:91/

    # 停止/启动/重启一个容器
    $docker start/stop/restart Name/ID

    # 杀死一个容器
    $docker kill Name/ID
    
    # 删除所有容器
    $docker rm `docker ps -a -q` 
    
    # 删除单个容器; -f, --force=false; -l, --link=false Remove the specified link and not the underlying container; -v, --volumes=false Remove the volumes associated to the container
    $docker rm Name/ID
    ```
3. 容器操作
    * ps
    * inspect
    * top
    * attach
    * events
    * logs
    * wait
    * export
    * port

    ```bash
    # 列出container列表（默认运行中）：-a 所有; -l 最近一次; - q
    $docker ps -a

     # 从一个容器中取日志; -f, --follow=false Follow log output; -t, --timestamps=false Show timestamps
    $docker logs Name/ID 

    # 显示一个运行的容器里面的进程信息
    $docker top Name/ID 

    # 附加到一个运行的容器上面; --no-stdin=false Do not attach stdin; --sig-proxy=true Proxify all received signal to the process
    $docker attach ID
    ```
4. 容器rootfs命令
    * commit
    * cp
    * diff
    ```bash
    # 保存对容器的修改; -a, --author="" Author; -m, --message="" Commit message
    $docker commit ID new_image_name

    # 列出一个容器里面被改变的文件或者目录，list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的
    $docker diff Name/ID

    # 从容器里面拷贝文件/目录到本地一个路径
    $docker cp Name:/container_path to_path
    $docker cp ID:/container_path to_path 
    ```
5. 镜像仓库
    * login
    * pull
    * push
    * search
    ```bash
    # 登陆registry server; -e, --email="" Email;-p, --password="" Password; -u, --username="" Username
    $docker login

    # 下载image
    $docker pull image_name
    
    # 发布docker镜像
    $docker push new_image_name

    # 检索image
    $docker search image_name 
    ```
    
6. 本地镜像管理
    * images
    * rmi
    * tag
    * build
    * history
    * save
    * import
    ```bash
    # 列出镜像列表; -a, --all=false Show all images; --no-trunc=false Don't truncate output; -q, --quiet=false Only show numeric IDs
    $docker images 

    # 删除一个或者多个镜像; -f, --force=false Force; --no-prune=false Do not delete untagged parents
    $docker rmi image_name 

    # 将镜像daocloud.io/library/nginx标记为 nginx 镜像
    $docker tag daocloud.io/library/nginx nginx

    #build ;--no-cache=false Do not use cache when building the image ;-q, --quiet=false Suppress the verbose output generated by the containers ; --rm=true Remove intermediate containers after a successful build ; -t, --tag="" Repository name (and optionally a tag) to be applied to the resulting image in case of success
    $docker build -t image_name Dockerfile_path

    # 显示一个镜像的历史; --no-trunc=false Don't truncate output; -q, --quiet=false Only show numeric IDs
    $docker history image_name


    # 保存镜像到一个tar包; -o, --output="" Write to an file
    $docker save image_name -o file_path

    # 机器a
    $docker save image_name > /home/save.tar

    # 加载一个tar包格式的镜像; -i, --input="" Read from a tar archive file
    $docker load -i file_path 
    
    # 使用scp将save.tar拷到机器b上，然后：
    $docker load < /home/save.tar
    ```

7. info|version
    * info
    * version
    ```bash
    # 查看docker版本
    $docker version 

    # 显示docker系统的信息
    $docker info
    ```

参考：

https://blog.csdn.net/we_shell/article/details/38368137

http://www.runoob.com/docker/docker-command-manual.html